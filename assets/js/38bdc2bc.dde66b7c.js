"use strict";(self.webpackChunkcrystal_docs=self.webpackChunkcrystal_docs||[]).push([[2123],{1695:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var s=n(5893),r=n(1151);const o={},c="Http \u534f\u8bae",l={id:"communication/http",title:"Http \u534f\u8bae",description:"Http \u534f\u8bae\u662f\u4ec0\u4e48",source:"@site/docs/communication/http.md",sourceDirName:"communication",slug:"/communication/http",permalink:"/docs/communication/http",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"TCP \u901a\u4fe1",permalink:"/docs/communication/tcp_implate"},next:{title:"Node \u9879\u76ee\u652f\u6301 ESModule",permalink:"/docs/problems/node_support_esm"}},i={},a=[{value:"Http \u534f\u8bae\u662f\u4ec0\u4e48",id:"http-\u534f\u8bae\u662f\u4ec0\u4e48",level:2},{value:"\u83b7\u53d6 Http \u8bf7\u6c42\u4fe1\u606f",id:"\u83b7\u53d6-http-\u8bf7\u6c42\u4fe1\u606f",level:2},{value:"\u8bbe\u7f6e Http \u54cd\u5e94",id:"\u8bbe\u7f6e-http-\u54cd\u5e94",level:2},{value:"\u5ba2\u6237\u7aef\u4ee3\u7406",id:"\u5ba2\u6237\u7aef\u4ee3\u7406",level:2},{value:"Http \u9759\u6001\u670d\u52a1",id:"http-\u9759\u6001\u670d\u52a1",level:2}];function h(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components},{Details:o}=t;return o||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"http-\u534f\u8bae",children:"Http \u534f\u8bae"}),"\n",(0,s.jsx)(t.h2,{id:"http-\u534f\u8bae\u662f\u4ec0\u4e48",children:"Http \u534f\u8bae\u662f\u4ec0\u4e48"}),"\n",(0,s.jsxs)(t.p,{children:["\u5e94\u7528\u5c42\u7684\u5e38\u7528\u534f\u8bae\uff0c\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u7684\u4e00\u79cd\u89c4\u5219\u7ea6\u5b9a\uff0c\u7ea6\u5b9a\u7531\u8bf7\u6c42\u548c\u54cd\u5e94\u4e24\u90e8\u5206\u7ec4\u6210\uff0c",(0,s.jsx)(t.code,{children:"\u8bf7\u6c42\u548c\u54cd\u5e94"})," \u4e2d\u5404\u81ea\u5305\u542b\u4e86\u56db\u4e2a\u90e8\u5206"]}),"\n",(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(t.strong,{children:"\u63a5\u4e0b\u6765\u901a\u8fc7 Demo \u6f14\u793a\u6765\u76f4\u89c2\u8ba4\u8bc6\u4e00\u4e0b http \u534f\u8bae"})}),(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"\u901a\u8fc7 net \u6a21\u5757\u521b\u5efa\u670d\u52a1\u7aef"}),"\n",(0,s.jsx)(t.li,{children:"\u901a\u8fc7\u6d4f\u89c8\u5668\u5145\u5f53\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\uff08\u56e0\u4e3a\u662f\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u5c31\u662f\u57fa\u4e8e http \u534f\u8bae\uff09"}),"\n"]}),(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"http\u534f\u8bae\u662f\u4ec0\u4e48demo",src:n(1884).Z+"",width:"1804",height:"1011"})}),(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/CrystalAngelLee/crystal-fd-repositories/blob/master/nodejs/http%E5%8D%8F%E8%AE%AE/server_net.js",children:"\u261e \u5b8c\u6574\u4ee3\u7801"})}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",metastring:'title="\u6253\u5370\u5185\u5bb9"',children:'# \u8bf7\u6c42\u884c: \u8bf7\u6c42\u65b9\u5f0f+\u8bf7\u6c42\u8def\u5f84+\u8bf7\u6c42\u534f\u8bae/\u7248\u672c\u53f7\nGET / HTTP/1.1\n# \u8bf7\u6c42\u5934\nHost: localhost:3306\nConnection: keep-alive\n# \u7f13\u5b58\nCache-Control: max-age=0\nsec-ch-ua: "Chromium";v="106", "Google Chrome";v="106", "Not;A=Brand";v="99"\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: "macOS"\nUpgrade-Insecure-Requests: 1\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\nSec-Fetch-Site: none\nSec-Fetch-Mode: navigate\nSec-Fetch-User: ?1\nSec-Fetch-Dest: document\nAccept-Encoding: gzip, deflate, br\nAccept-Language: zh-CN,zh;q=0.9\n# \u8bf7\u6c42\u7a7a\u884c\n# \u8bf7\u6c42\u4f53\uff08\u5728\u8fd9\u91cc\u6211\u4eec\u53d1\u9001\u7684\u662fGet\u8bf7\u6c42\uff0c\u65e0\u8bf7\u6c42\u4f53\uff09\n'})})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u901a\u8fc7\u4f7f\u7528 nodeJS \u4e2d\u7684 http \u6a21\u5757\u521b\u5efa http \u670d\u52a1\u7aef"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"http \u521b\u5efa\u7684\u670d\u52a1\u7aef\u4e13\u95e8\u7528\u6765\u505a web \u670d\u52a1"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'const http = require("http");\n\n// \u521b\u5efa\u670d\u52a1\u7aef\nconst server = http.createServer((req, res) => {\n  // \u9488\u5bf9\u4e8e\u8bf7\u6c42\u548c\u54cd\u5e94\u5b8c\u6210\u5404\u81ea\u7684\u64cd\u4f5c\n  console.log("test");\n});\n\nserver.listen(3306, () => {\n  console.log("http server is running");\n});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"\u83b7\u53d6-http-\u8bf7\u6c42\u4fe1\u606f",children:"\u83b7\u53d6 Http \u8bf7\u6c42\u4fe1\u606f"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'const server = http.createServer((req, res) => {\n  // \u9488\u5bf9\u4e8e\u8bf7\u6c42\u548c\u54cd\u5e94\u5b8c\u6210\u5404\u81ea\u7684\u64cd\u4f5c\n  // \u8bf7\u6c42\u8def\u5f84-\u4f7f\u7528url\u6a21\u5757\u5c06\u8bf7\u6c42\u8def\u5f84\u548c\u8bf7\u6c42\u53c2\u6570\u5206\u5f00\n  const { pathname, query } = url.parse(req.url, true);\n  console.log("req.url", pathname, query);\n\n  // \u8bf7\u6c42\u65b9\u5f0f\n  console.log(req.method);\n\n  // \u534f\u8bae\u7248\u672c\u53f7\n  console.log(req.httpVersion);\n\n  /* \u8bf7\u6c42\u5934 */\n  console.log(req.headers);\n\n  /**\n   * \u8bf7\u6c42\u4f53\u6570\u636e\u83b7\u53d6\n   * \u53ef\u4ee5\u901a\u8fc7 curl \u5de5\u5177\u8fdb\u884c\u6a21\u62df\u53d1\u9001\n   * curl -v -X POST -d "\'name\': \'test\'" http://localhost:3306/\n   */\n  const arr = [];\n  req.on("data", (data) => {\n    arr.push(data);\n  });\n  req.on("end", () => {\n    console.log(Buffer.concat(arr).toString());\n  });\n});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"\u8bbe\u7f6e-http-\u54cd\u5e94",children:"\u8bbe\u7f6e Http \u54cd\u5e94"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'const server = http.createServer((req, res) => {\n  // \u8bbe\u7f6e\u72b6\u6001\u7801\n  res.statusCode = 302;\n  // \u8bbe\u7f6e\u54cd\u5e94\u5934\n  res.setHeader("Content-type", "text/html;charset=utf-8");\n  res.end("test ok & \u4e2d\u6587\u6d4b\u8bd5");\n});\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/CrystalAngelLee/crystal-fd-repositories/blob/master/nodejs/http%E5%8D%8F%E8%AE%AE/server.js",children:"\u261e \u5b8c\u6574\u4ee3\u7801"})}),"\n",(0,s.jsx)(t.h2,{id:"\u5ba2\u6237\u7aef\u4ee3\u7406",children:"\u5ba2\u6237\u7aef\u4ee3\u7406"}),"\n",(0,s.jsx)(t.p,{children:"\u4f7f\u7528 nodeJS \u63d0\u4f9b\u7684\u4e00\u4e9b\u529f\u80fd\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a http \u5ba2\u6237\u7aef\uff0c\u7531\u5b83\u5411\u67d0\u4e2a\u670d\u52a1\u7aef\u53d1\u9001\u8bf7\u6c42"}),"\n",(0,s.jsx)(t.p,{children:"\u597d\u5904\uff1a\u5f53\u8bf7\u6c42\u51fa\u73b0\u8de8\u57df\u73b0\u8c61\u7684\u65f6\u5019\u901a\u8fc7\u8fd9\u79cd\u624b\u6bb5\u8fdb\u884c\u5904\u7406"}),"\n",(0,s.jsx)(t.p,{children:"\u5b9e\u73b0\uff1a\u8ba9\u6d4f\u89c8\u5668\u5ba2\u6237\u7aef\u76f4\u63a5\u5411\u201d\u4ee3\u7406\u5ba2\u6237\u7aef\u201c\u53d1\u9001\u8bf7\u6c42\uff0c\u7136\u540e\u201d\u4ee3\u7406\u5ba2\u6237\u7aef\u201c\u518d\u5411\u6307\u5b9a\u670d\u52a1\u7aef\u53d1\u9001\u8bf7\u6c42\uff08\u670d\u52a1\u7aef\u4e4b\u95f4\u7684\u901a\u4fe1\u4e0d\u5b58\u5728\u8de8\u57df\u73b0\u8c61\uff09"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"node\u8de8\u57df_\u5ba2\u6237\u7aef\u4ee3\u7406",src:n(4623).Z+"",width:"3400",height:"2088"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/CrystalAngelLee/crystal-fd-repositories/blob/master/nodejs/http%E5%8D%8F%E8%AE%AE/client_agent.js",children:"\u261e \u5ba2\u6237\u7aef\u4ee3\u7406\u4e4b\u5ba2\u6237\u7aef\u90e8\u5206\u5b8c\u6574\u4ee3\u7801"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/CrystalAngelLee/crystal-fd-repositories/blob/master/nodejs/http%E5%8D%8F%E8%AE%AE/server_agent.js",children:"\u261e \u5ba2\u6237\u7aef\u4ee3\u7406\u4e4b\u670d\u52a1\u7aef\u90e8\u5206\u5b8c\u6574\u4ee3\u7801"})}),"\n",(0,s.jsx)(t.admonition,{title:"\u8de8\u57df\u95ee\u9898\u5904\u7406\u5b8c\u6574\u4ee3\u7801",type:"note",children:(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/CrystalAngelLee/crystal-fd-repositories/blob/master/nodejs/http%E5%8D%8F%E8%AE%AE/client_agent_cross.js",children:"client_agent_cross.js"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/CrystalAngelLee/crystal-fd-repositories/blob/master/nodejs/http%E5%8D%8F%E8%AE%AE/server_agent_cross.js",children:"server_agent_cross.js"})}),"\n"]})}),"\n",(0,s.jsx)(t.h2,{id:"http-\u9759\u6001\u670d\u52a1",children:"Http \u9759\u6001\u670d\u52a1"}),"\n",(0,s.jsx)(t.p,{children:"\u5c31\u662f\u4f7f\u7528 nodeJS \u4e2d\u7684 http \u6a21\u5757\u5f00\u542f\u4e00\u4e2a\u670d\u52a1\u7aef\uff0c\u7531\u6d4f\u89c8\u5668\u5145\u5f53\u5ba2\u6237\u7aef\uff0c\u6309\u7167\u4e00\u5b9a\u7684\u8def\u5f84\u8bbf\u95ee\u76ee\u6807\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u9759\u6001\u8d44\u6e90"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/CrystalAngelLee/crystal-fd-repositories/tree/master/nodejs/http%E5%8D%8F%E8%AE%AE/static_server",children:"\u261e \u5b8c\u6574\u4ee3\u7801"})})]})}function d(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1884:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/http_demo-6ce97f1d7a0c1f4ef36600f0830d7c18.png"},4623:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/node_agent_across_client-5b4e5c23ec5ce5e825f1b8b10f1ec8e1.png"},1151:(e,t,n)=>{n.d(t,{Z:()=>l,a:()=>c});var s=n(7294);const r={},o=s.createContext(r);function c(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);