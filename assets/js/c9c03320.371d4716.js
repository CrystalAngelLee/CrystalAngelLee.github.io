"use strict";(self.webpackChunkcrystal_docs=self.webpackChunkcrystal_docs||[]).push([[1755],{618:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>a,frontMatter:()=>c,metadata:()=>d,toc:()=>t});var i=s(5893),l=s(1151);const c={},r="\u811a\u624b\u67b6\u67b6\u6784\u8bbe\u8ba1\u56fe",d={id:"scaffold/cli",title:"\u811a\u624b\u67b6\u67b6\u6784\u8bbe\u8ba1\u56fe",description:"\u7ed8\u5236\u5de5\u5177 omnigraffle \u6fc0\u6d3b\u7801\uff1ahttps://www.renfei.net/posts/1003394",source:"@site/docs/scaffold/cli.md",sourceDirName:"scaffold",slug:"/scaffold/cli",permalink:"/docs/scaffold/cli",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},o={},t=[{value:"\u811a\u624b\u67b6\u6838\u5fc3\u65b9\u6848\u6280\u672f\u8bbe\u8ba1",id:"\u811a\u624b\u67b6\u6838\u5fc3\u65b9\u6848\u6280\u672f\u8bbe\u8ba1",level:2},{value:"\u811a\u624b\u67b6\u62c6\u5305\u7b56\u7565",id:"\u811a\u624b\u67b6\u62c6\u5305\u7b56\u7565",level:3},{value:"\u6838\u5fc3\u6d41\u7a0b\u6280\u672f\u65b9\u6848",id:"\u6838\u5fc3\u6d41\u7a0b\u6280\u672f\u65b9\u6848",level:3},{value:"\u5f00\u53d1\u51c6\u5907",id:"\u5f00\u53d1\u51c6\u5907",level:4},{value:"\u51c6\u5907\u9636\u6bb5",id:"\u51c6\u5907\u9636\u6bb5",level:4},{value:"\u547d\u4ee4\u6ce8\u518c",id:"\u547d\u4ee4\u6ce8\u518c",level:4},{value:"init \u547d\u4ee4\u6ce8\u518c",id:"init-\u547d\u4ee4\u6ce8\u518c",level:5},{value:"\u547d\u4ee4\u6267\u884c",id:"\u547d\u4ee4\u6267\u884c",level:4}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"\u811a\u624b\u67b6\u67b6\u6784\u8bbe\u8ba1\u56fe",children:"\u811a\u624b\u67b6\u67b6\u6784\u8bbe\u8ba1\u56fe"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u7ed8\u5236\u5de5\u5177 omnigraffle \u6fc0\u6d3b\u7801\uff1a",(0,i.jsx)(e.a,{href:"https://www.renfei.net/posts/1003394",children:"https://www.renfei.net/posts/1003394"})]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u811a\u624b\u67b6\u6838\u5fc3\u65b9\u6848\u6280\u672f\u8bbe\u8ba1",children:"\u811a\u624b\u67b6\u6838\u5fc3\u65b9\u6848\u6280\u672f\u8bbe\u8ba1"}),"\n",(0,i.jsx)(e.h3,{id:"\u811a\u624b\u67b6\u62c6\u5305\u7b56\u7565",children:"\u811a\u624b\u67b6\u62c6\u5305\u7b56\u7565"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6838\u5fc3\u6d41\u7a0b\uff1acore"}),"\n",(0,i.jsxs)(e.li,{children:["\u547d\u4ee4\uff1acommands","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u521d\u59cb\u5316"}),"\n",(0,i.jsx)(e.li,{children:"\u53d1\u5e03"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6a21\u578b\u5c42\uff1amodels","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Command \u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"Project \u9879\u76ee"}),"\n",(0,i.jsx)(e.li,{children:"Component \u7ec4\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"Npm \u6a21\u5757"}),"\n",(0,i.jsx)(e.li,{children:"Git \u4ed3\u5e93"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u652f\u6491\u6a21\u5757\uff1autils","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"git \u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u4e91\u6784\u5efa"}),"\n",(0,i.jsx)(e.li,{children:"\u5de5\u5177\u65b9\u6cd5"}),"\n",(0,i.jsx)(e.li,{children:"API \u8bf7\u6c42"}),"\n",(0,i.jsx)(e.li,{children:"Git api"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u6838\u5fc3\u6d41\u7a0b\u6280\u672f\u65b9\u6848",children:"\u6838\u5fc3\u6d41\u7a0b\u6280\u672f\u65b9\u6848"}),"\n",(0,i.jsx)(e.h4,{id:"\u5f00\u53d1\u51c6\u5907",children:"\u5f00\u53d1\u51c6\u5907"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u9879\u76ee\u51c6\u5907"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# 1. \u521d\u59cb\u5316\u9879\u76ee\n# 1.1 Create an empty directory and Change into the new directory\nmkdir mzcli && cd mzcli\n# 1.2 Initialize lerna (using --dryRun to preview the changes)\nnpx lerna init --packages="core/*" --dryRun\n# 1.3 confirm change\nnpx lerna init --packages="core/*"\n\n# 2. change .gitignore\n.vscode\nnode_modules/\nlerna-debug.log\n\n**/node_modules\n\n# 3. change package.json workspaces\n"workspaces": [\n  "core/*"\n]\n'})}),"\n",(0,i.jsxs)(e.p,{children:["**2. \u521b\u5efa packages core/cli: ",(0,i.jsx)(e.code,{children:"npx lerna create @mzcli/core  -y"})," **"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6587\u4ef6 bin/cli.js"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:'#!/usr/bin/env node\n\nconsole.log("hello world");\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539 package.json"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  ...\n  "main": "bin/cli.js",\n  "bin": {\n    "mzcli": "bin/cli.js"\n  },\n  ...\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9a8c\u8bc1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"npm link\nmzcli\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u51c6\u5907\u9636\u6bb5",children:"\u51c6\u5907\u9636\u6bb5"}),"\n",(0,i.jsx)(e.h4,{id:"\u547d\u4ee4\u6ce8\u518c",children:"\u547d\u4ee4\u6ce8\u518c"}),"\n",(0,i.jsx)(e.h5,{id:"init-\u547d\u4ee4\u6ce8\u518c",children:"init \u547d\u4ee4\u6ce8\u518c"}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"npm init egg --type=simple"})," \u521d\u59cb\u5316 egg \u9879\u76ee"]}),"\n",(0,i.jsx)(e.p,{children:"npm init \u9ed8\u8ba4\u4f1a\u628a\u5f53\u524d\u76ee\u5f55\u4f5c\u4e3a npm \u9879\u76ee\u505a\u521d\u59cb\u5316\uff0c\u5982\u679c\u5728\u540e\u9762\u52a0\u4e0a\u4e00\u4e2a\u547d\u4ee4 (\u4f8b\u5982 egg) npm \u5c31\u4f1a\u5e2e\u6211\u4eec\u6267\u884c egg \u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u4f7f\u7528 npm init \u540e\u9762\u52a0\u4e0a\u4e00\u4e2a\u9879\u76ee\u6216\u8005\u811a\u624b\u67b6\u540d\u79f0\u7684\u65f6\u5019 \u4f1a\u8c03\u7528 create -\u540e\u9762\u8fd9\u4e2a\u540d\u79f0\u7684NPM \u5305 \u300cnpm init egg \u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f create-egg \u811a\u624b\u67b6\u300d"}),"\n",(0,i.jsx)(e.h4,{id:"\u547d\u4ee4\u6267\u884c",children:"\u547d\u4ee4\u6267\u884c"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.a,{href:"https://ejs.bootcss.com/",children:"ejs"})})}),"\n",(0,i.jsx)(e.h1,{id:"\u9644\u5168\u5c40\u53d8\u91cf",children:"\u9644\uff1a\u5168\u5c40\u53d8\u91cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"#\nprocess.env.CLI_HOME\n#\nprocess.env.CLI_HOME_PATH\n# \u65e5\u5fd7\u6253\u5370\u9636\u7ea7 \u7528\u4e8e\u5f00\u542fdebug\u6a21\u5f0f\nprocess.env.LOG_LEVEL\n# \u5f53\u524d\u8c03\u8bd5\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\nprocess.env.CLI_TARGET_PATH\n# \u7f13\u5b58\u76ee\u5f55\nprocess.env.CLI_HOME_PATH\n"})})]})}function a(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(h,{...n})}):h(n)}},1151:(n,e,s)=>{s.d(e,{Z:()=>d,a:()=>r});var i=s(7294);const l={},c=i.createContext(l);function r(n){const e=i.useContext(c);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),i.createElement(c.Provider,{value:e},n.children)}}}]);