"use strict";(self.webpackChunkcrystal_docs=self.webpackChunkcrystal_docs||[]).push([[8467],{4325:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>d});var t=r(5893),s=r(1151);const c={},i="TS \u6cdb\u578b",a={id:"typescript/basic_generics",title:"TS \u6cdb\u578b",description:"\u2753 \u4ec0\u4e48\u662f\u6cdb\u578b",source:"@site/docs/typescript/basic_generics.md",sourceDirName:"typescript",slug:"/typescript/basic_generics",permalink:"/docs/typescript/basic_generics",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Interface \u63a5\u53e3\u7c7b\u578b",permalink:"/docs/typescript/basic_interface"},next:{title:"this",permalink:"/docs/typescript/basic_this"}},l={},d=[{value:"\u2753 \u4ec0\u4e48\u662f\u6cdb\u578b",id:"-\u4ec0\u4e48\u662f\u6cdb\u578b",level:2},{value:"\u6cdb\u578b\u7c7b\u578b\u53c2\u6570",id:"\u6cdb\u578b\u7c7b\u578b\u53c2\u6570",level:2},{value:"\u6cdb\u578b\u7c7b",id:"\u6cdb\u578b\u7c7b",level:2},{value:"\u6cdb\u578b\u7c7b\u578b",id:"\u6cdb\u578b\u7c7b\u578b",level:2},{value:"\u6cdb\u578b\u7ea6\u675f",id:"\u6cdb\u578b\u7ea6\u675f",level:2},{value:"\u6cdb\u578b\u4f7f\u7528 demo",id:"\u6cdb\u578b\u4f7f\u7528-demo",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"ts-\u6cdb\u578b",children:"TS \u6cdb\u578b"}),"\n",(0,t.jsx)(n.h2,{id:"-\u4ec0\u4e48\u662f\u6cdb\u578b",children:"\u2753 \u4ec0\u4e48\u662f\u6cdb\u578b"}),"\n",(0,t.jsx)(n.p,{children:"\u501f\u7528 Java \u4e2d\u6cdb\u578b\u7684\u91ca\u4e49\u6765\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff1a\u6cdb\u578b\u6307\u7684\u662f\u7c7b\u578b\u53c2\u6570\u5316\uff0c\u5373\u5c06\u539f\u6765\u67d0\u79cd\u5177\u4f53\u7684\u7c7b\u578b\u8fdb\u884c\u53c2\u6570\u5316\u3002\u548c\u5b9a\u4e49\u51fd\u6570\u53c2\u6570\u4e00\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u6cdb\u578b\u5b9a\u4e49\u82e5\u5e72\u4e2a\u7c7b\u578b\u53c2\u6570\uff0c\u5e76\u5728\u8c03\u7528\u65f6\u7ed9\u6cdb\u578b\u4f20\u5165\u660e\u786e\u7684\u7c7b\u578b\u53c2\u6570\u3002\u8bbe\u8ba1\u6cdb\u578b\u7684\u76ee\u7684\u5728\u4e8e\u6709\u6548\u7ea6\u675f\u7c7b\u578b\u6210\u5458\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u6bd4\u5982\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\u3001\u7c7b\u6216\u8005\u63a5\u53e3\u6210\u5458\u548c\u65b9\u6cd5\u4e4b\u95f4\u7684\u5173\u7cfb\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6cdb\u578b\u7c7b\u578b\u53c2\u6570",children:"\u6cdb\u578b\u7c7b\u578b\u53c2\u6570"}),"\n",(0,t.jsx)(n.p,{children:"\u6cdb\u578b\u6700\u5e38\u7528\u7684\u573a\u666f\u662f\u7528\u6765\u7ea6\u675f\u51fd\u6570\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fd\u6570\u5b9a\u4e49\u82e5\u5e72\u4e2a\u88ab\u8c03\u7528\u65f6\u624d\u4f1a\u4f20\u5165\u660e\u786e\u7c7b\u578b\u7684\u53c2\u6570\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6bd4\u5982\u4ee5\u4e0b\u5b9a\u4e49\u7684\u4e00\u4e2a reflect \u51fd\u6570 \uff0c\u5b83\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u4efb\u610f\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5e76\u539f\u5c01\u4e0d\u52a8\u5730\u8fd4\u56de\u53c2\u6570\u7684\u503c\u548c\u7c7b\u578b\uff0c\u90a3\u6211\u4eec\u8be5\u5982\u4f55\u63cf\u8ff0\u8fd9\u4e2a\u51fd\u6570\u5462\uff1f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'function reflect(param: unknown) {\n  return param;\n}\nconst str = reflect("string"); // str \u7c7b\u578b\u662f unknown\nconst num = reflect(1); // num \u7c7b\u578b unknown\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u6b64\u65f6\uff0creflect \u51fd\u6570\u867d\u7136\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u4efb\u610f\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u539f\u5c01\u4e0d\u52a8\u5730\u8fd4\u56de\u53c2\u6570\u7684\u503c\uff0c\u4e0d\u8fc7\u8fd4\u56de\u503c\u7c7b\u578b\u4e0d\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\u3002\u56e0\u4e3a\u6211\u4eec\u5e0c\u671b\u8fd4\u56de\u503c\u7c7b\u578b\u4e0e\u5165\u53c2\u7c7b\u578b\u4e00\u4e00\u5bf9\u5e94\uff08\u6bd4\u5982 number \u5bf9 number\u3001string \u5bf9 string\uff09\uff0c\u800c\u4e0d\u662f\u65e0\u8bba\u5165\u53c2\u662f\u4ec0\u4e48\u7c7b\u578b\uff0c\u8fd4\u56de\u503c\u4e00\u5f8b\u662f unknown\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6b64\u65f6\uff0c\u6cdb\u578b\u6b63\u597d\u53ef\u4ee5\u6ee1\u8db3\u8fd9\u6837\u7684\u8bc9\u6c42\uff0c\u90a3\u5982\u4f55\u5b9a\u4e49\u4e00\u4e2a\u6cdb\u578b\u53c2\u6570\u5462\uff1f\u9996\u5148\uff0c\u6211\u4eec\u628a\u53c2\u6570 param \u7684\u7c7b\u578b\u5b9a\u4e49\u4e3a\u4e00\u4e2a\uff08\u7c7b\u578b\u5c42\u9762\u7684\uff09\u53c2\u6570\u3001\u53d8\u91cf\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u660e\u786e\u7684\u7c7b\u578b\uff0c\u7b49\u5230\u51fd\u6570\u8c03\u7528\u65f6\u518d\u4f20\u5165\u660e\u786e\u7684\u7c7b\u578b\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"function reflect<P>(param: P) {\n  return param;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5c16\u62ec\u53f7\u4e2d\u7684 P \u8868\u793a\u6cdb\u578b\u53c2\u6570\u7684\u5b9a\u4e49\uff0cparam \u540e\u7684 P \u8868\u793a\u53c2\u6570\u7684\u7c7b\u578b\u662f\u6cdb\u578b P\uff08\u5373\u7c7b\u578b\u53d7 P \u7ea6\u675f\uff09\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"function reflect<P>(param: P): P {\n  return param;\n}\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'const reflectStr = reflect<string>("string"); // str \u7c7b\u578b\u662f string\nconst reflectNum = reflect<number>(1); // num \u7c7b\u578b number\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u53e6\u5916\uff0c\u5982\u679c\u8c03\u7528\u6cdb\u578b\u51fd\u6570\u65f6\u53d7\u6cdb\u578b\u7ea6\u675f\u7684\u53c2\u6570\u6709\u4f20\u503c\uff0c\u6cdb\u578b\u53c2\u6570\u7684\u5165\u53c2\u53ef\u4ee5\u4ece\u53c2\u6570\u7684\u7c7b\u578b\u4e2d\u8fdb\u884c\u63a8\u65ad\uff0c\u800c\u65e0\u987b\u518d\u663e\u5f0f\u6307\u5b9a\u7c7b\u578b\uff08\u53ef\u7f3a\u7701\uff09\uff0c\u56e0\u6b64\u4e0a\u8fb9\u7684\u793a\u4f8b\u53ef\u4ee5\u7b80\u5199\u4e3a\u5982\u4e0b\u793a\u4f8b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'const reflectStr2 = reflect("string"); // str \u7c7b\u578b\u662f string\nconst reflectNum2 = reflect(1); // num \u7c7b\u578b number\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u6cdb\u578b\u4e0d\u4ec5\u53ef\u4ee5\u7ea6\u675f\u51fd\u6570\u6574\u4e2a\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u8fd8\u53ef\u4ee5\u7ea6\u675f\u53c2\u6570\u5c5e\u6027\u3001\u6210\u5458\u7684\u7c7b\u578b\uff0c\u6bd4\u5982\u53c2\u6570\u7684\u7c7b\u578b\u53ef\u4ee5\u662f\u6570\u7ec4\u3001\u5bf9\u8c61\uff0c\u5982\u4e0b\u793a\u4f8b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'function reflectArray<P>(param: P[]) {\n  return param;\n}\nconst reflectArr = reflectArray([1, "1"]); // reflectArr \u662f (string | number)[]\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u4eec\u7ea6\u675f\u4e86 param \u7684\u7c7b\u578b\u662f\u6570\u7ec4\uff0c\u6570\u7ec4\u7684\u5143\u7d20\u7c7b\u578b\u662f\u6cdb\u578b\u5165\u53c2\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7\u6cdb\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u7ea6\u675f\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u5173\u7cfb\u3002\u4e3e\u4e00\u4e2a\u6211\u4eec\u6bd4\u8f83\u719f\u6089\u7684\u5b9e\u9645\u573a\u666f React Hooks useState \u4e3a\u4f8b\uff0c\u5982\u4e0b\u793a\u4f8b\u4e2d\uff0c\u7b2c 2 \u884c return \u7684\u5143\u7ec4\uff08\u56e0\u4e3a useState \u8fd4\u56de\u7684\u662f\u957f\u5ea6\u4e3a 2\u3001\u5143\u7d20\u7c7b\u578b\u56fa\u5b9a\u7684\u6570\u7ec4\uff09\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u5c31\u662f\u6cdb\u578b S\uff0c\u7b2c\u4e8c\u4e2a\u51fd\u6570\u7c7b\u578b\u5143\u7d20\u7684\u53c2\u6570\u7c7b\u578b\u4e5f\u662f\u6cdb\u578b S\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"function useState<S>(state: S, initialValue?: S) {\n  return [state, (s: S) => void 0] as unknown as [S, (s: S) => void];\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a\u51fd\u6570\u7684\u6cdb\u578b\u5165\u53c2\u5fc5\u987b\u548c\u53c2\u6570/\u53c2\u6570\u6210\u5458\u5efa\u7acb\u6709\u6548\u7684\u7ea6\u675f\u5173\u7cfb\u624d\u6709\u5b9e\u9645\u610f\u4e49\u3002"})," \u6bd4\u5982\u5728\u4e0b\u9762\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4ec5\u7ea6\u675f\u8fd4\u56de\u503c\u7c7b\u578b\u7684\u6cdb\u578b\uff0c\u5b83\u662f\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\u7684\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"function uselessGenerics<P>(): P {\n  return void 0 as unknown as P;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fd\u6570\u5b9a\u4e49\u4efb\u4f55\u4e2a\u6570\u7684\u6cdb\u578b\u5165\u53c2\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"function reflectExtraParams<P, Q>(p1: P, p2: Q): [P, Q] {\n  return [p1, p2];\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u62e5\u6709\u4e24\u4e2a\u6cdb\u578b\u5165\u53c2\uff08P \u548c Q\uff09\u7684\u51fd\u6570 reflectExtraParams\uff0c\u5e76\u901a\u8fc7 P \u548c Q \u7ea6\u675f\u51fd\u6570\u53c2\u6570 p1\u3001p2 \u548c\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6cdb\u578b\u7c7b",children:"\u6cdb\u578b\u7c7b"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u7c7b\u7684\u5b9a\u4e49\u4e2d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6cdb\u578b\u7528\u6765\u7ea6\u675f\u6784\u9020\u51fd\u6570\u3001\u5c5e\u6027\u3001\u65b9\u6cd5\u7684\u7c7b\u578b\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'class Memory<S> {\n  store: S;\n  constructor(store: S) {\n    this.store = store;\n  }\n  set(store: S) {\n    this.store = store;\n  }\n  get() {\n    return this.store;\n  }\n}\nconst numMemory = new Memory<number>(1); // <number> \u53ef\u7f3a\u7701\nconst getNumMemory = numMemory.get(); // \u7c7b\u578b\u662f number\nnumMemory.set(2); // \u53ea\u80fd\u5199\u5165 number \u7c7b\u578b\nconst strMemory = new Memory(""); // \u7f3a\u7701 <string>\nconst getStrMemory = strMemory.get(); // \u7c7b\u578b\u662f string\nstrMemory.set("string"); // \u53ea\u80fd\u5199\u5165 string \u7c7b\u578b\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u9996\u5148\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u652f\u6301\u8bfb\u5199\u7684\u5bc4\u5b58\u5668\u7c7b Memory\uff0c\u5e76\u4f7f\u7528\u6cdb\u578b\u7ea6\u675f\u4e86 Memory \u7c7b\u7684\u6784\u9020\u5668\u51fd\u6570\u3001set \u548c get \u65b9\u6cd5\u5f62\u53c2\u7684\u7c7b\u578b\uff0c\u6700\u540e\u5b9e\u4f8b\u5316\u4e86\u6cdb\u578b\u5165\u53c2\u5206\u522b\u662f number \u548c string \u7c7b\u578b\u7684\u4e24\u79cd\u5bc4\u5b58\u5668\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6cdb\u578b\u7c7b\u548c\u6cdb\u578b\u51fd\u6570\u7c7b\u4f3c\u7684\u5730\u65b9\u5728\u4e8e\uff0c\u5728\u521b\u5efa\u7c7b\u5b9e\u4f8b\u65f6\uff0c\u5982\u679c\u53d7\u6cdb\u578b\u7ea6\u675f\u7684\u53c2\u6570\u4f20\u5165\u4e86\u660e\u786e\u503c\uff0c\u5219\u6cdb\u578b\u5165\u53c2\uff08\u786e\u5207\u5730\u8bf4\u662f\u4f20\u5165\u7684\u7c7b\u578b\uff09\u53ef\u7f3a\u7701\uff0c\u6bd4\u5982\u7b2c 14 \u884c\u3001\u7b2c 18 \u884c\uff0c<number>\u3001<string> \u6cdb\u578b\u5165\u53c2\u5c31\u662f\u53ef\u4ee5\u7f3a\u7701\u7684\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8e React \u5f00\u53d1\u8005\u800c\u8a00\uff0c\u7ec4\u4ef6\u4e5f\u652f\u6301\u6cdb\u578b\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'function GenericCom<P>(props: { prop1: string }) {\n  return <></>;\n};\n<GenericCom<{ name: string; }> prop1="1" ... />\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u6cdb\u578b\u7c7b\u578b",children:"\u6cdb\u578b\u7c7b\u578b"}),"\n",(0,t.jsx)(n.p,{children:"\u5728 TypeScript \u4e2d\uff0c\u7c7b\u578b\u672c\u8eab\u5c31\u53ef\u4ee5\u88ab\u5b9a\u4e49\u4e3a\u62e5\u6709\u4e0d\u660e\u786e\u7684\u7c7b\u578b\u53c2\u6570\u7684\u6cdb\u578b\uff0c\u5e76\u4e14\u53ef\u4ee5\u63a5\u6536\u660e\u786e\u7c7b\u578b\u4f5c\u4e3a\u5165\u53c2\uff0c\u4ece\u800c\u884d\u751f\u51fa\u66f4\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const reflectFn: <P>(param: P) => P = reflect; // ok\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u4eec\u4e3a\u53d8\u91cf reflectFn \u663e\u5f0f\u6dfb\u52a0\u4e86\u6cdb\u578b\u7c7b\u578b\u6ce8\u89e3\uff0c\u5e76\u5c06 reflect \u51fd\u6570\u4f5c\u4e3a\u503c\u8d4b\u7ed9\u4e86\u5b83\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u4e5f\u53ef\u4ee5\u628a reflectFn \u7684\u7c7b\u578b\u6ce8\u89e3\u63d0\u53d6\u4e3a\u4e00\u4e2a\u80fd\u88ab\u590d\u7528\u7684\u7c7b\u578b\u522b\u540d\u6216\u8005\u63a5\u53e3\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type ReflectFuncton = <P>(param: P) => P;\ninterface IReflectFuncton {\n  <P>(param: P): P;\n}\nconst reflectFn2: ReflectFuncton = reflect;\nconst reflectFn3: IReflectFuncton = reflect;\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5c06\u7c7b\u578b\u5165\u53c2\u7684\u5b9a\u4e49\u79fb\u52a8\u5230\u7c7b\u578b\u522b\u540d\u6216\u63a5\u53e3\u540d\u79f0\u540e\uff0c\u6b64\u65f6\u5b9a\u4e49\u7684\u4e00\u4e2a\u63a5\u6536\u5177\u4f53\u7c7b\u578b\u5165\u53c2\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u7c7b\u578b\u7684\u7c7b\u578b\u5c31\u662f\u6cdb\u578b\u7c7b\u578b\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u4e0b\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e24\u4e2a\u53ef\u4ee5\u63a5\u6536\u5165\u53c2 P \u7684\u6cdb\u578b\u7c7b\u578b\uff08GenericReflectFunction \u548c IGenericReflectFunction \uff09\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'type GenericReflectFunction<P> = (param: P) => P;\ninterface IGenericReflectFunction<P> {\n  (param: P): P;\n}\nconst reflectFn4: GenericReflectFunction<string> = reflect; // \u5177\u8c61\u5316\u6cdb\u578b\nconst reflectFn5: IGenericReflectFunction<number> = reflect; // \u5177\u8c61\u5316\u6cdb\u578b\nconst reflectFn3Return = reflectFn4("string"); // \u5165\u53c2\u548c\u8fd4\u56de\u503c\u90fd\u5fc5\u987b\u662f string \u7c7b\u578b\nconst reflectFn4Return = reflectFn5(1); //  \u5165\u53c2\u548c\u8fd4\u56de\u503c\u90fd\u5fc5\u987b\u662f number \u7c7b\u578b\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u6cdb\u578b\u5b9a\u4e49\u4e2d\uff0c\u6211\u4eec\u751a\u81f3\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u7c7b\u578b\u64cd\u4f5c\u7b26\u8fdb\u884c\u8fd0\u7b97\u8868\u8fbe\uff0c\u4f7f\u5f97\u6cdb\u578b\u53ef\u4ee5\u6839\u636e\u5165\u53c2\u7684\u7c7b\u578b\u884d\u751f\u51fa\u5404\u5f02\u7684\u7c7b\u578b\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type StringOrNumberArray<E> = E extends string | number ? E[] : E;\ntype StringArray = StringOrNumberArray<string>; // \u7c7b\u578b\u662f string[]\ntype NumberArray = StringOrNumberArray<number>; // \u7c7b\u578b\u662f number[]\ntype NeverGot = StringOrNumberArray<boolean>; // \u7c7b\u578b\u662f boolean\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6cdb\u578b\uff0c\u5982\u679c\u5165\u53c2\u662f number | string \u5c31\u4f1a\u751f\u6210\u4e00\u4e2a\u6570\u7ec4\u7c7b\u578b\uff0c\u5426\u5219\u5c31\u751f\u6210\u5165\u53c2\u7c7b\u578b\u3002\u800c\u4e14\uff0c\u6211\u4eec\u8fd8\u4f7f\u7528\u4e86\u4e0e JavaScript \u4e09\u5143\u8868\u8fbe\u5f0f\u5b8c\u5168\u4e00\u81f4\u7684\u8bed\u6cd5\u6765\u8868\u8fbe\u7c7b\u578b\u8fd0\u7b97\u7684\u903b\u8f91\u5173\u7cfb"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u5982\u679c\u6211\u4eec\u7ed9\u4e0a\u9762\u8fd9\u4e2a\u6cdb\u578b\u4f20\u5165\u4e86\u4e00\u4e2a string | boolean \u8054\u5408\u7c7b\u578b\u4f5c\u4e3a\u5165\u53c2\uff0c\u5c06\u4f1a\u5f97\u5230\u4ec0\u4e48\u7c7b\u578b\u5462\uff1f\u4e14\u770b\u5982\u4e0b\u6240\u793a\u793a\u4f8b\uff1a"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type BooleanOrString = string | boolean;\ntype WhatIsThis = StringOrNumberArray<BooleanOrString>; // \u597d\u50cf\u5e94\u8be5\u662f string | boolean ?\ntype BooleanOrStringGot = BooleanOrString extends string | number\n  ? BooleanOrString[]\n  : BooleanOrString; //  string | boolean\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5206\u914d\u6761\u4ef6\u7c7b\u578b\uff08Distributive Conditional Types\uff09"}),"\n\u5728\u6761\u4ef6\u7c7b\u578b\u5224\u65ad\u7684\u60c5\u51b5\u4e0b\uff08\u6bd4\u5982\u4e0a\u8fb9\u793a\u4f8b\u4e2d\u51fa\u73b0\u7684 extends\uff09\uff0c\u5982\u679c\u5165\u53c2\u662f\u8054\u5408\u7c7b\u578b\uff0c\u5219\u4f1a\u88ab\u62c6\u89e3\u6210\u4e00\u4e2a\u4e2a\u72ec\u7acb\u7684\uff08\u539f\u5b50\uff09\u7c7b\u578b\uff08\u6210\u5458\uff09\u8fdb\u884c\u7c7b\u578b\u8fd0\u7b97\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u6bd4\u5982\u4e0a\u8fb9\u793a\u4f8b\u4e2d\u7684 string | boolean \u5165\u53c2\uff0c\u5148\u88ab\u62c6\u89e3\u6210 string \u548c boolean \u8fd9\u4e24\u4e2a\u72ec\u7acb\u7c7b\u578b\uff0c\u518d\u5206\u522b\u5224\u65ad\u662f\u5426\u662f string | number \u7c7b\u578b\u7684\u5b50\u96c6\u3002",(0,t.jsx)(n.strong,{children:"\u56e0\u4e3a string \u662f\u5b50\u96c6\u800c boolean \u4e0d\u662f\uff0c\u6240\u4ee5\u6700\u7ec8\u6211\u4eec\u5f97\u5230\u7684 WhatIsThis \u7684\u7c7b\u578b\u662f boolean | string[]"}),"\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u80fd\u63a5\u53d7\u5165\u53c2\u7684\u6cdb\u578b\u7c7b\u578b\u548c\u51fd\u6570\u4e00\u6837\uff0c\u90fd\u53ef\u4ee5\u5bf9\u5165\u53c2\u7c7b\u578b\u8fdb\u884c\u8ba1\u7b97\u5e76\u8fd4\u56de\u65b0\u7684\u7c7b\u578b\uff0c\u50cf\u662f\u5728\u505a\u7c7b\u578b\u8fd0\u7b97\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5229\u7528\u6cdb\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u62bd\u8c61\u5c01\u88c5\u51fa\u5f88\u591a\u6709\u7528\u3001\u590d\u6742\u7684\u7c7b\u578b\u7ea6\u675f\u3002\u6bd4\u5982\u5728 Redux Model \u4e2d\u7ea6\u675f State \u548c Reducers \u7684\u7c7b\u578b\u5b9a\u4e49\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u6240\u793a\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u65e2\u80fd\u63a5\u53d7 State \u7c7b\u578b\u5165\u53c2\uff0c\u53c8\u5305\u542b state \u548c reducers \u8fd9\u4e24\u4e2a\u5c5e\u6027\u7684\u63a5\u53e3\u7c7b\u578b\u6cdb\u578b\uff0c\u5e76\u901a\u8fc7 State \u5165\u53c2\u7ea6\u675f\u4e86\u6cdb\u578b\u7684 state \u5c5e\u6027\u548c reducers \u5c5e\u6027\u4e0b action \u7d22\u5f15\u5c5e\u6027\u7684\u7c7b\u578b\u5173\u7cfb\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"interface ReduxModel<State> {\n  state: State;\n  reducers: {\n    [action: string]: (state: State, action: any) => State;\n  };\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7136\u540e\u6839\u636e\u5b9e\u9645\u9700\u8981\uff0c\u6211\u4eec\u4f20\u5165\u4e86\u4e00\u4e2a\u5177\u4f53\u7684 State \u7c7b\u578b\u5177\u8c61\u5316 ReduxModel\uff0c\u5e76\u7ea6\u675f\u4e86\u4e00\u4e2a\u5b9e\u9645\u7684 model\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'type ModelInterface = { id: number; name: string };\nconst model: ReduxModel<ModelInterface> = {\n  state: { id: 1, name: "\u4e7e\u5143" }, //  ok \u7c7b\u578b\u5fc5\u987b\u662f ModelInterface\n  reducers: {\n    setId: (state, action: { payload: number }) => ({\n      ...state,\n      id: action.payload, // ok must be number\n    }),\n    setName: (state, action: { payload: string }) => ({\n      ...state,\n      name: action.payload, // ok must be string\n    }),\n  },\n};\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0cmodel \u5bf9\u8c61\u7684 state \u5c5e\u6027\u3001reducers \u5c5e\u6027\u7684 setId\u3001setName \u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570 state \u7684\u7c7b\u578b\u90fd\u53d7\u5230 ReduxModel \u6cdb\u578b\u5165\u53c2 ModelInterface \u7684\u7ea6\u675f\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6cdb\u578b\u7ea6\u675f",children:"\u6cdb\u578b\u7ea6\u675f"}),"\n",(0,t.jsx)(n.p,{children:"\u524d\u9762\u63d0\u5230\u4e86\u6cdb\u578b\u5c31\u50cf\u662f\u7c7b\u578b\u7684\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u62bd\u8c61\u3001\u5c01\u88c5\u5e76\u63a5\u6536\uff08\u7c7b\u578b\uff09\u5165\u53c2\uff0c\u800c\u6cdb\u578b\u7684\u5165\u53c2\u4e5f\u62e5\u6709\u7c7b\u4f3c\u51fd\u6570\u5165\u53c2\u7684\u7279\u6027\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6cdb\u578b\u5165\u53c2\u9650\u5b9a\u5728\u4e00\u4e2a\u76f8\u5bf9\u66f4\u660e\u786e\u7684\u96c6\u5408\u5185\uff0c\u4ee5\u4fbf\u5bf9\u5165\u53c2\u8fdb\u884c\u7ea6\u675f\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6bd4\u5982\u6700\u524d\u8fb9\u63d0\u5230\u7684\u539f\u5c01\u4e0d\u52a8\u8fd4\u56de\u53c2\u6570\u7684 reflect \u51fd\u6570\uff0c\u6211\u4eec\u5e0c\u671b\u628a\u63a5\u6536\u53c2\u6570\u7684\u7c7b\u578b\u9650\u5b9a\u5728\u51e0\u79cd\u539f\u59cb\u7c7b\u578b\u7684\u96c6\u5408\u4e2d\uff0c\u6b64\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528\u201c\u6cdb\u578b\u5165\u53c2\u540d extends \u7c7b\u578b\u201d\u8bed\u6cd5\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"function reflectSpecified<P extends number | string | boolean>(param: P): P {\n  return param;\n}\nreflectSpecified(\"string\"); // ok\nreflectSpecified(1); // ok\nreflectSpecified(true); // ok\nreflectSpecified(null); // ts(2345) 'null' \u4e0d\u80fd\u8d4b\u4e88\u7c7b\u578b 'number | string | boolean'\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9650\u5b9a\u4e86\u6cdb\u578b\u5165\u53c2\u53ea\u80fd\u662f number | string | boolean \u7684\u5b50\u96c6\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u540c\u6837\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u628a\u63a5\u53e3\u6cdb\u578b\u5165\u53c2\u7ea6\u675f\u5728\u7279\u5b9a\u7684\u8303\u56f4\u5185\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"interface ReduxModelSpecified<State extends { id: number; name: string }> {\n  state: State;\n}\ntype ComputedReduxModel1 = ReduxModelSpecified<{ id: number; name: string }>; // ok\ntype ComputedReduxModel2 = ReduxModelSpecified<{\n  id: number;\n  name: string;\n  age: number;\n}>; // ok\ntype ComputedReduxModel3 = ReduxModelSpecified<{ id: string; name: number }>; // ts(2344)\ntype ComputedReduxModel4 = ReduxModelSpecified<{ id: number }>; // ts(2344)\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u591a\u4e2a\u4e0d\u540c\u7684\u6cdb\u578b\u5165\u53c2\u4e4b\u95f4\u8bbe\u7f6e\u7ea6\u675f\u5173\u7cfb\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'interface ObjSetter {\n  <O extends {}, K extends keyof O, V extends O[K]>(\n    obj: O,\n    key: K,\n    value: V\n  ): V;\n}\nconst setValueOfObj: ObjSetter = (obj, key, value) => (obj[key] = value);\nsetValueOfObj({ id: 1, name: "name" }, "id", 2); // ok\nsetValueOfObj({ id: 1, name: "name" }, "name", "new name"); // ok\nsetValueOfObj({ id: 1, name: "name" }, "age", 2); // ts(2345)\nsetValueOfObj({ id: 1, name: "name" }, "id", "2"); // ts(2345)\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u8bbe\u7f6e\u5bf9\u8c61\u5c5e\u6027\u503c\u7684\u51fd\u6570\u7c7b\u578b\u65f6\uff0c\u5b83\u62e5\u6709 3 \u4e2a\u6cdb\u578b\u5165\u53c2\uff1a\u7b2c 1 \u4e2a\u662f\u5bf9\u8c61\uff0c\u7b2c 2 \u4e2a\u662f\u7b2c 1 \u4e2a\u5165\u53c2\u5c5e\u6027\u540d\u96c6\u5408\u7684\u5b50\u96c6\uff0c\u7b2c 3 \u4e2a\u662f\u6307\u5b9a\u5c5e\u6027\u7c7b\u578b\u7684\u5b50\u7c7b\u578b\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u53e6\u5916\uff0c\u6cdb\u578b\u5165\u53c2\u4e0e\u51fd\u6570\u5165\u53c2\u8fd8\u6709\u4e00\u4e2a\u76f8\u4f3c\u7684\u5730\u65b9\u5728\u4e8e\uff0c\u5b83\u4e5f\u53ef\u4ee5\u7ed9\u6cdb\u578b\u5165\u53c2\u6307\u5b9a\u9ed8\u8ba4\u503c\uff08\u9ed8\u8ba4\u7c7b\u578b\uff09\uff0c\u4e14\u8bed\u6cd5\u548c\u6307\u5b9a\u51fd\u6570\u9ed8\u8ba4\u53c2\u6570\u5b8c\u5168\u4e00\u81f4\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"interface ReduxModelSpecified2<State = { id: number; name: string }> {\n  state: State;\n}\ntype ComputedReduxModel5 = ReduxModelSpecified2; // ok\ntype ComputedReduxModel6 = ReduxModelSpecified2<{ id: number; name: string }>; // ok\ntype ComputedReduxModel7 = ReduxModelSpecified; // ts(2314) \u7f3a\u5c11\u4e00\u4e2a\u7c7b\u578b\u53c2\u6570\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u5165\u53c2\u6709\u9ed8\u8ba4\u7c7b\u578b\u7684\u6cdb\u578b ReduxModelSpecified2\uff0c\u56e0\u6b64\u4f7f\u7528 ReduxModelSpecified2 \u65f6\u7c7b\u578b\u5165\u53c2\u53ef\u7f3a\u7701\u3002\u800c ReduxModelSpecified \u7684\u5165\u53c2\u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u6240\u4ee5\u7f3a\u7701\u5165\u53c2\u65f6\u4f1a\u63d0\u793a\u4e00\u4e2a\u7c7b\u578b\u9519\u8bef\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6cdb\u578b\u5165\u53c2\u7684\u7ea6\u675f\u4e0e\u9ed8\u8ba4\u503c\u8fd8\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\uff0c\u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"interface ReduxModelMixed<State extends {} = { id: number; name: string }> {\n  state: State;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6cdb\u578b\u4f7f\u7528-demo",children:"\u6cdb\u578b\u4f7f\u7528 demo"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'// \u5728\u51fd\u6570\u4e2d\u4f7f\u7528\nfunction swap<T, U>(tuple: [T, U]): [U, T] {\n  return [tuple[1], tuple[0]];\n}\nconst result = swap(["string", 123]);\n\ninterface Resp {\n  name: string;\n  count: number;\n}\nfunction withAPI<T>(url: string): Promise<T> {\n  return fetch(url).then((resp) => resp.json());\n}\nwithAPI<Resp>("github.user").then((resp) => {});\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>i});var t=r(7294);const s={},c=t.createContext(s);function i(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);